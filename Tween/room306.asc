// room script file
Overlay* _overlay;

function _RestoreOverlay() {
  _overlay.X = 0;
  _overlay.Y = 0;
}
  
function testPosition() {
  Test("Position");
  
  _overlay.TweenPosition(0.5, Room.Width, Room.Height);
  ExpectIntToBe(_overlay.X, Room.Width, "Position X");
  ExpectIntToBe(_overlay.Y, Room.Height, "Position Y");
  
  _RestoreOverlay();
  
  _overlay.TweenX(0.5, Room.Width);
  ExpectIntToBe(_overlay.X, Room.Width, "X X");
  ExpectIntToBe(_overlay.Y, 0, "X Y");
  
  _RestoreOverlay();
  
  _overlay.TweenY(0.5, Room.Height);
  ExpectIntToBe(_overlay.X, 0, "Y X");
  ExpectIntToBe(_overlay.Y, Room.Height, "Y Y");
  
  _RestoreOverlay();
  
  _overlay.TweenPosition(0.5, Room.Width, Room.Height, eEaseLinearTween, eNoBlockTween);
  _overlay.StopTweenPosition(eFinishTween);
  ExpectIntToBe(_overlay.X, Room.Width, "Stop X");
  ExpectIntToBe(_overlay.Y, Room.Height, "Stop Y");
  
  _RestoreOverlay();
}

function testStopAll() {
  Test("StopAll");
 
  _overlay.TweenPosition(0.5, Room.Width, Room.Height, eEaseLinearTween, eNoBlockTween);
  _overlay.StopAllTweens(eFinishTween);
  ExpectIntToBe(_overlay.X, Room.Width, "X");
  ExpectIntToBe(_overlay.Y, Room.Height, "Y");
  
  _RestoreOverlay();
}

function room_Load()
{
  _overlay = Overlay.CreateRoomTextual(0, 0, 120, eFontNormal, 15, "Hello, world!");
}

function room_AfterFadeIn()
{
  StartCutscene(eSkipESCOnly);
  
  testPosition();
  testStopAll();
  
  EndCutscene();
  player.ChangeRoom(99);
}

function room_Leave()
{
 _overlay.Remove();
 _overlay = null;
}
